import Foundation


/*
Ð”Ð¾Ð¼Ð°ÑˆÐ½ÐµÐµ Ð·Ð°Ð´Ð°Ð½Ð¸Ðµ 4
 
 1. ÐžÐ¿Ð¸ÑÐ°Ñ‚ÑŒ ÐºÐ»Ð°ÑÑ Car c Ð¾Ð±Ñ‰Ð¸Ð¼Ð¸ ÑÐ²Ð¾Ð¹ÑÑ‚Ð²Ð°Ð¼Ð¸ Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»ÐµÐ¹ Ð¸ Ð¿ÑƒÑÑ‚Ñ‹Ð¼ Ð¼ÐµÑ‚Ð¾Ð´Ð¾Ð¼ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ Ð¿Ð¾ Ð°Ð½Ð°Ð»Ð¾Ð³Ð¸Ð¸ Ñ Ð¿Ñ€Ð¾ÑˆÐ»Ñ‹Ð¼ Ð·Ð°Ð´Ð°Ð½Ð¸ÐµÐ¼.
 2. ÐžÐ¿Ð¸ÑÐ°Ñ‚ÑŒ Ð¿Ð°Ñ€Ñƒ ÐµÐ³Ð¾ Ð½Ð°ÑÐ»ÐµÐ´Ð½Ð¸ÐºÐ¾Ð² trunkCar Ð¸ sportÐ¡ar. ÐŸÐ¾Ð´ÑƒÐ¼Ð°Ñ‚ÑŒ, ÐºÐ°ÐºÐ¸Ð¼Ð¸ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼Ð¸ ÑÐ²Ð¾Ð¹ÑÑ‚Ð²Ð°Ð¼Ð¸ Ð¾Ð±Ð»Ð°Ð´Ð°ÑŽÑ‚ ÑÑ‚Ð¸ Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»Ð¸. ÐžÐ¿Ð¸ÑÐ°Ñ‚ÑŒ Ð² ÐºÐ°Ð¶Ð´Ð¾Ð¼ Ð½Ð°ÑÐ»ÐµÐ´Ð½Ð¸ÐºÐµ ÑÐ¿ÐµÑ†Ð¸Ñ„Ð¸Ñ‡Ð½Ñ‹Ðµ Ð´Ð»Ñ Ð½ÐµÐ³Ð¾ ÑÐ²Ð¾Ð¹ÑÑ‚Ð²Ð°.
 3. Ð’Ð·ÑÑ‚ÑŒ Ð¸Ð· Ð¿Ñ€Ð¾ÑˆÐ»Ð¾Ð³Ð¾ ÑƒÑ€Ð¾ÐºÐ° enum Ñ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸ÑÐ¼Ð¸ Ð½Ð°Ð´ Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»ÐµÐ¼. ÐŸÐ¾Ð´ÑƒÐ¼Ð°Ñ‚ÑŒ, ÐºÐ°ÐºÐ¸Ðµ Ð¾ÑÐ¾Ð±ÐµÐ½Ð½Ñ‹Ðµ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ Ð¸Ð¼ÐµÐµÑ‚ trunkCar, Ð° ÐºÐ°ÐºÐ¸Ðµ â€“ sportCar. Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÑÑ‚Ð¸ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ Ð² Ð¿ÐµÑ€ÐµÑ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ðµ.
 4. Ð’ ÐºÐ°Ð¶Ð´Ð¾Ð¼ Ð¿Ð¾Ð´ÐºÐ»Ð°ÑÑÐµ Ð¿ÐµÑ€ÐµÐ¾Ð¿Ñ€ÐµÐ´ÐµÐ»Ð¸Ñ‚ÑŒ Ð¼ÐµÑ‚Ð¾Ð´ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ Ñ Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»ÐµÐ¼ Ð² ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ð¸ Ñ ÐµÐ³Ð¾ ÐºÐ»Ð°ÑÑÐ¾Ð¼.
 5. Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ð¾Ð±ÑŠÐµÐºÑ‚Ð¾Ð² ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ ÐºÐ»Ð°ÑÑÐ°. ÐŸÑ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ðº Ð½Ð¸Ð¼ Ñ€Ð°Ð·Ð»Ð¸Ñ‡Ð½Ñ‹Ðµ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ.
 6. Ð’Ñ‹Ð²ÐµÑÑ‚Ð¸ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ ÑÐ²Ð¾Ð¹ÑÑ‚Ð² ÑÐºÐ·ÐµÐ¼Ð¿Ð»ÑÑ€Ð¾Ð² Ð² ÐºÐ¾Ð½ÑÐ¾Ð»ÑŒ.
 */

    enum EngineStatus {  // ÑÑ‚Ð²Ð°Ñ‚ÑƒÑ Ð´Ð²Ð¸Ð³Ð°Ñ‚ÐµÐ»Ñ
        case on, off
        var description: String {
            switch self  {
            case .on:
                return "Ð”Ð²Ð¸Ð³Ð°Ñ‚ÐµÐ»ÑŒ Ð·Ð°Ð²ÐµÐ´ÐµÐ½"
            case .off:
                return "Ð”Ð²Ð¸Ð³Ð°Ñ‚ÐµÐ»ÑŒ Ð·Ð°Ð³Ð»ÑƒÑˆÐµÐ½"
            }
        }
    }
    enum WindowStatus { // Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð¾ÐºÐ¾Ð½
        case opened, closed
        
        var description: String{ //Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¾ÐºÐ¾Ð½
            switch self {
            case .opened:
                return "ÐžÐºÐ½Ð° Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ñ‹"
            case .closed:
                return "ÐžÐºÐ½Ð° Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ñ‹"
            }
        }
    }
    enum TrunckBodyType {   // Ñ‚Ð¸Ð¿ ÐºÑƒÐ·Ð¾Ð²Ð°
        case box, tank, refregerator
        
        var description: String {
            switch self {
            case .box:
                return "Ð¡Ñ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ñ‹Ð¹ ÐºÑƒÐ·Ð¾Ð²"
            case .tank:
                return "Ð¦Ð¸ÑÑ‚ÐµÑ€Ð½Ð°"
            case .refregerator:
                return "Ð¥Ð¾Ð»Ð¾Ð´Ð¸Ð»ÑŒÐ½Ð°Ñ ÐºÐ°Ð¼ÐµÑ€Ð°"
            }
        }
    }
    enum Action {
        case switchEngine (EngineStatus)
        case switchWindow (WindowStatus)
        case loadCargo (Double)
        case attachTruckBody (TrunckBodyType)
        case replaseTyres
        }

class Car {
    let brand:String
    let productionYear: Int
    var engine: EngineStatus = .off
    var windows: WindowStatus = .closed
    
    init(brand: String, productionYear:Int, engine: EngineStatus, windiws: WindowStatus ) {
        self.brand = brand
        self.productionYear = productionYear
        self.engine = .off
        self.windows = .closed
    }
    func perform (action: Action) {  // Ð¿ÑƒÑÑ‚Ð¾Ð¹ Ð¼ÐµÑ‚Ð¾Ð´ Ð´Ð»Ñ Ð¿Ð¾ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ¹ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ†Ð¸Ð¸
    }
}

class TrunkCar: Car {
    static var typeEmoji = "ðŸšš"
    let maxCargoSpace: Double
    var currentCargoSpace: Double = 0
    var body: TrunckBodyType?
    
    var description: String {
        let bodyDescription = body?.description ?? "ÐžÑ‚Ñ†ÐµÐ¿Ð»ÐµÐ½"
        return "\(TrunkCar.typeEmoji)\(brand)\nÐ“Ð¾Ð´ Ð²Ñ‹Ð¿ÑƒÑÐºÐ°: \(productionYear)\nÐšÑƒÐ·Ð¾Ð²: \(bodyDescription) \(currentCargoSpace)/\(maxCargoSpace)\nÐ¡Ð¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ: \(engine) | \(windows)\n"
    }
    init(brand: String, productionYear: Int, maxCargoSpace:Double, body:TrunckBodyType?) {
        self.body = body
        self.maxCargoSpace = maxCargoSpace
        super.init(brand: brand, productionYear: productionYear, engine: .off, windiws: .closed)
    }
    override func perform(action: Action) { // Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÐ¼ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ñ‹Ðµ Ð´ÐµÐ¹ÑÑ‚ÑƒÐ¸Ñ
        switch action {
        case .switchEngine(let status):
            engine = status
        case .switchWindow(let status):
            windows = status
        case.loadCargo(let load):
            guard body != nil else {
                return
            }
            let expectedLoad = load + currentCargoSpace
            switch expectedLoad  {
            case _ where expectedLoad > maxCargoSpace:
                currentCargoSpace = maxCargoSpace
            case _ where expectedLoad < 0:
                currentCargoSpace = 0
            default:
                currentCargoSpace += load
            }
        case .attachTruckBody(let newBody):
            self.body = newBody
            currentCargoSpace = 0
        default:
            break
        }
    }
}
    class SportCar: Car, CustomStringConvertible {
        var typeEmoji = "ðŸš—"
        var zeroToHandredAcceleration: Double = 0.0
        var topSpeed:Int = 0
        
        var description: String {
            return "\(typeEmoji) \(brand)\nÐ“Ð¾Ð´ Ð²Ñ‹Ð¿ÑƒÑÐºÐ°: \(productionYear)\nÐ Ð°Ð·Ð³Ð¾Ð½ 0-100 ÐºÐ¼/Ñ‡: \(zeroToHandredAcceleration) c\nÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ð¹ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒÑŽ: \(topSpeed) ÐºÐ¼/Ñ‡\nÐ¡Ð¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ: \(engine) | \(windows)\n"
        }
        init(brand: String, productionYear: Int, zeroToHandredAcceleration: Double, topSpeed: Int) {
            self.zeroToHandredAcceleration = zeroToHandredAcceleration
            self.topSpeed = topSpeed
            super.init(brand: brand, productionYear: productionYear, engine: .on, windiws: .opened)
        }
        override func perform(action: Action) {
            switch action {
            case .switchEngine(let status):
                engine = status
            case .switchWindow(let status):
                windows = status
            case .replaseTyres:
                print("ÐŸÑ€Ð¾Ð¸Ð·Ð²ÐµÐ´ÐµÐ½Ð° Ð·Ð°Ð¼ÐµÐ½Ð° ÑˆÐ¸Ð½!")
            default:
                break
            }
        }
    }

    var manTruck = TrunkCar(brand: "MAN LION PRO 640", productionYear: 2019, maxCargoSpace: 3000, body: nil)
    
manTruck.perform(action: .attachTruckBody(.tank))
manTruck.perform(action: .loadCargo (1500))
manTruck.perform(action: .switchEngine (.on))
print (manTruck)

var ferrari = SportCar(brand: "Ferrary", productionYear: 2017, zeroToHandredAcceleration: 3.4, topSpeed: 325)
ferrari.perform(action: .switchWindow(.closed))
ferrari.perform(action: .replaseTyres)
ferrari.perform(action: .switchEngine(.on))
print (ferrari)

TrunkCar.typeEmoji = "$$"
ferrari.typeEmoji = "!!"

print (ferrari)
print (manTruck)
